(this.webpackJsonptalkmeupapp=this.webpackJsonptalkmeupapp||[]).push([[0],{14:function(e,t,s){},15:function(e,t,s){},16:function(e,t,s){"use strict";s.r(t);var r=s(0),n=s(1),a=s.n(n),c=s(8),o=s.n(c),i=(s(14),s(3)),u=s(4),l=s(2),h=s(6),d=s(5),p=(s(15),function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).state={term:""},r.handleChange=function(e){r.setState({term:e.target.value}),e.preventDefault()},r.onSubmit=function(e){r.state.term.length>0&&r.props.searchForTerm(r.state.term),e.preventDefault()},r}return Object(u.a)(s,[{key:"render",value:function(){return Object(r.jsx)("form",{onSubmit:this.onSubmit,className:"SearchPage",children:Object(r.jsx)("table",{className:"SearchPageTable",children:Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{className:"SearchBarCell",children:Object(r.jsx)("input",{className:"SearchBar",type:"text",value:this.state.term,placeholder:"Search for something!",onChange:this.handleChange})}),Object(r.jsx)("td",{className:"SearchButtonCell",children:Object(r.jsx)("input",{className:"SearchButton",type:"submit",value:"Search!"})})]})})})})}}]),s}(a.a.Component));function b(e){var t=null;switch(e.type){default:console.error("Unkown result type: "+e.type);break;case"image":t=Object(r.jsx)("img",{className:"ResultMedia",src:e.src,alt:"An image relating to "+e.searchedTerm});break;case"video":t=Object(r.jsx)("div",{className:"ResultMedia",dangerouslySetInnerHTML:{__html:e.player}})}return Object(r.jsxs)("div",{className:"Result",children:[Object(r.jsx)("div",{children:t}),Object(r.jsx)("input",{type:"button",value:e.interest?"Interested!":"Not Interested",onClick:function(t){e.setInterest(!e.interest),t.preventDefault()},style:e.interest?{color:"green"}:{color:"red"}})]})}var j=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).state={results:r.props.results.slice()},r.state.results.sort((function(){return Math.random()-5})),r.getSetInterest=function(e){return function(t){var s=r.state.results.slice();s[e]=Object.assign({},s[e]),s[e].interest=t,r.setState({results:s}),console.log("Setting interest of "+s[e].src+" to "+t)}},r.goBack=r.goBack.bind(Object(l.a)(r)),r}return Object(u.a)(s,[{key:"goBack",value:function(){this.props.setInterests(this.props.searchedTerm,this.state.results.filter((function(e){return e.interest})).map((function(e){return e.src}))),this.props.goBack()}},{key:"componentDidUpdate",value:function(e,t,s){if(this.props.results!==e.results){var r=this.props.results.slice();r.sort((function(){return Math.random()-.5})),this.setState({results:r})}}},{key:"render",value:function(){for(var e=this,t=this.state.results.slice(),s=[];t.length;)s.push(t.splice(0,3));return Object(r.jsxs)("div",{className:"ResultsPage",children:[Object(r.jsx)("table",{className:"ResultsMatrix",children:Object(r.jsx)("tbody",{children:s.map((function(t,s){return Object(r.jsx)("tr",{className:"ResultsRow",children:t.map((function(t,n){return Object(r.jsx)("td",{className:"ResultsCell",children:Object(r.jsx)(b,{searchedTerm:e.props.searchedTerm,src:t.src,type:t.type,interest:t.interest,player:t.player,setInterest:e.getSetInterest(3*s+n)})},3*s+n)}))},s)}))})}),Object(r.jsx)("input",{className:"GoBackButton",type:"button",value:"Go Back",onClick:this.goBack})]})}}]),s}(a.a.Component),m="AIzaSyAee85G7oYuStRYoBOlgvpp_ky0MKgbqYQ",f=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).state={curPage:"search",interests:{},searchedTerm:"",results:[]},r.searchForTerm=r.searchForTerm.bind(Object(l.a)(r)),r.setInterests=r.setInterests.bind(Object(l.a)(r)),r}return Object(u.a)(s,[{key:"searchForTerm",value:function(e){var t=this;this.setState({curPage:"results",searchedTerm:e}),console.log("Searching for "+e);var s=new XMLHttpRequest;s.open("GET","https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyAM0zBXsd42sz2F_EcHnQMfr09CJ0pirlY&cx=c55eb86d669bd3886&q="+e+"&num=10&searchType=IMAGE"),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE){var r=JSON.parse(s.responseText);if(console.log("image results:",r),void 0===r.error){var n=r.items.filter((function(e){return"image/"!==e.fileFormat})).map((function(e){return{src:e.link,type:"image"}}));n.splice(7);var a=t.state.interests[e];void 0!==a&&n.forEach((function(e){return e.interest=a.includes(e.src)})),t.setState({results:t.state.results.concat(n)})}else console.error("unable to search google images for "+e),console.error(s.responseText)}};var r=new XMLHttpRequest;r.open("GET","https://www.googleapis.com/youtube/v3/search?key="+m+"&type=video&videoEmbeddable=true&maxResults=2&q="+e),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var s=JSON.parse(r.responseText);if("youtube#searchListResponse"===s.kind){var n=new XMLHttpRequest,a="https://www.googleapis.com/youtube/v3/videos?key="+m+"&part=player,id&id="+s.items.map((function(e){return e.id.videoId})).join();console.log("Getting from "+a),n.open("GET",a),n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var s=JSON.parse(n.responseText);if("youtube#videoListResponse"===s.kind){console.log("Video results: ",s);var r=s.items.map((function(e){return{src:"https://youtu.be/"+e.id,player:e.player.embedHtml,type:"video"}})),a=t.state.interests[e];void 0!==a&&r.forEach((function(e){return e.interest=a.includes(e.src)})),t.setState({results:t.state.results.concat(r)})}else console.error("Unable to retrieve youtube videos: ",n.responseText)}},n.send()}else console.error("Unable to search youtube: ",r.responseText)}},s.send(),r.send()}},{key:"setInterests",value:function(e,t){var s=Object.assign({},this.state.interests);t.length>0?s[e]=t:void 0!==s[e]&&delete s[e],this.setState({interests:s})}},{key:"render",value:function(){var e=this;switch(this.state.curPage){default:console.error("Unknown page "+this.state.curPage),this.setState({curPage:"search"});case"search":return Object(r.jsxs)("div",{children:[Object(r.jsx)(p,{searchForTerm:this.searchForTerm}),Object(r.jsx)("input",{className:"InterestsButton",type:"button",value:"Get Interests (JSON)",onClick:function(){return e.setState({curPage:"interests"})}})]});case"results":return Object(r.jsx)("div",{children:Object(r.jsx)(j,{searchedTerm:this.state.searchedTerm,results:this.state.results,setInterests:this.setInterests,goBack:function(){return e.setState({curPage:"search",results:[]})}})});case"interests":return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("code",{children:JSON.stringify(this.state.interests)})}),Object(r.jsx)("input",{className:"GoBackButton",type:"button",value:"Go Back",onClick:function(){return e.setState({curPage:"search"})}})]})}}}]),s}(a.a.Component);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(f,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ed621bd1.chunk.js.map